(self.webpackChunksarafan=self.webpackChunksarafan||[]).push([[592],{322:function(t,e,n){"use strict";n.d(e,{H:function(){return a}});var i=n(1671),s=n(5366),o=function(t){return t[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",t}({});function r(t){return function(e,n){const i={ids:[...n.ids],entities:Object.assign({},n.entities)},s=t(e,i);return s===o.Both?Object.assign({},n,i):s===o.EntitiesOnly?Object.assign(Object.assign({},n),{entities:i.entities}):n}}function c(t,e){const n=e(t);return(0,s.X6Q)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function u(t){function e(e,n){const i=c(e,t);return i in n.entities?o.None:(n.ids.push(i),n.entities[i]=e,o.Both)}function n(t,n){let i=!1;for(const s of t)i=e(s,n)!==o.None||i;return i?o.Both:o.None}function i(t,e){const n=(t instanceof Array?t:e.ids.filter(n=>t(e.entities[n]))).filter(t=>t in e.entities).map(t=>delete e.entities[t]).length>0;return n&&(e.ids=e.ids.filter(t=>t in e.entities)),n?o.Both:o.None}function s(t,e){return u([t],e)}function u(e,n){const i={};return(e=e.filter(t=>t.id in n.entities)).length>0?e.filter(e=>function(e,n,i){const s=Object.assign({},i.entities[n.id],n.changes),o=c(s,t),r=o!==n.id;return r&&(e[n.id]=o,delete i.entities[n.id]),i.entities[o]=s,r}(i,e,n)).length>0?(n.ids=n.ids.map(t=>i[t]||t),o.Both):o.EntitiesOnly:o.None}function a(e,i){const s=[],r=[];for(const n of e){const e=c(n,t);e in i.entities?r.push({id:e,changes:n}):s.push(n)}const a=u(r,i),d=n(s,i);switch(!0){case d===o.None&&a===o.None:return o.None;case d===o.Both||a===o.Both:return o.Both;default:return o.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:r(e),addMany:r(n),setAll:r(function(t,e){return e.ids=[],e.entities={},n(t,e),o.Both}),setOne:r(function(e,n){const i=c(e,t);return i in n.entities?(n.entities[i]=e,o.EntitiesOnly):(n.ids.push(i),n.entities[i]=e,o.Both)}),updateOne:r(s),updateMany:r(u),upsertOne:r(function(t,e){return a([t],e)}),upsertMany:r(a),removeOne:r(function(t,e){return i([t],e)}),removeMany:r(i),map:r(function(t,e){return u(e.ids.reduce((n,i)=>{const s=t(e.entities[i]);return s!==e.entities[i]&&n.push({id:i,changes:s}),n},[]).filter(({id:t})=>t in e.entities),e)}),mapOne:r(function({map:t,id:e},n){const i=n.entities[e];return i?s({id:e,changes:t(i)},n):o.None})}}function a(t={}){const{selectId:e,sortComparer:n}=Object.assign({sortComparer:!1,selectId:t=>t.id},t),s={getInitialState:function(t={}){return Object.assign({ids:[],entities:{}},t)}},a={getSelectors:function(t){const e=t=>t.ids,n=t=>t.entities,s=(0,i.P1)(e,n,(t,e)=>t.map(t=>e[t])),o=(0,i.P1)(e,t=>t.length);return t?{selectIds:(0,i.P1)(t,e),selectEntities:(0,i.P1)(t,n),selectAll:(0,i.P1)(t,s),selectTotal:(0,i.P1)(t,o)}:{selectIds:e,selectEntities:n,selectAll:s,selectTotal:o}}},d=n?function(t,e){const{removeOne:n,removeMany:i,removeAll:s}=u(t);function a(t,e){return d([t],e)}function d(e,n){const i=e.filter(e=>!(c(e,t)in n.entities));return 0===i.length?o.None:(p(i,n),o.Both)}function l(t,e){return f([t],e)}function f(e,n){const i=[],s=e.filter(e=>function(e,n,i){if(!(n.id in i.entities))return!1;const s=Object.assign({},i.entities[n.id],n.changes),o=c(s,t);return delete i.entities[n.id],e.push(s),o!==n.id}(i,e,n)).length>0;if(0===i.length)return o.None;{const t=n.ids,e=[];return n.ids=n.ids.filter((t,i)=>t in n.entities||(e.push(i),!1)),p(i,n),!s&&e.every(e=>n.ids[e]===t[e])?o.EntitiesOnly:o.Both}}function h(e,n){const i=[],s=[];for(const o of e){const e=c(o,t);e in n.entities?s.push({id:e,changes:o}):i.push(o)}const r=f(s,n),u=d(i,n);switch(!0){case u===o.None&&r===o.None:return o.None;case u===o.Both||r===o.Both:return o.Both;default:return o.EntitiesOnly}}function p(n,i){n.sort(e);const s=[];let o=0,r=0;for(;o<n.length&&r<i.ids.length;){const u=n[o],a=c(u,t),d=i.ids[r];e(u,i.entities[d])<=0?(s.push(a),o++):(s.push(d),r++)}i.ids=s.concat(o<n.length?n.slice(o).map(t):i.ids.slice(r)),n.forEach((e,n)=>{i.entities[t(e)]=e})}return{removeOne:n,removeMany:i,removeAll:s,addOne:r(a),updateOne:r(l),upsertOne:r(function(t,e){return h([t],e)}),setAll:r(function(t,e){return e.entities={},e.ids=[],d(t,e),o.Both}),setOne:r(function(e,n){const i=c(e,t);return i in n.entities?(n.ids=n.ids.filter(t=>t!==i),p([e],n),o.Both):a(e,n)}),addMany:r(d),updateMany:r(f),upsertMany:r(h),map:r(function(t,e){return f(e.ids.reduce((n,i)=>{const s=t(e.entities[i]);return s!==e.entities[i]&&n.push({id:i,changes:s}),n},[]),e)}),mapOne:r(function({map:t,id:e},n){const i=n.entities[e];return i?l({id:e,changes:t(i)},n):o.None})}}(e,n):u(e);return Object.assign(Object.assign(Object.assign({selectId:e,sortComparer:n},s),a),d)}}}]);